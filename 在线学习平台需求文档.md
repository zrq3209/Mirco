# Learning在线学习平台需求文档

## 1. 项目概述

### 1.1 项目背景

随着互联网技术的发展和在线教育的普及，越来越多的用户倾向于通过网络平台进行学习。为满足用户多样化的学习需求，提供高质量的在线教育服务，我们计划开发一个基于微服务架构的在线学习平台——Learning。

### 1.2 项目目标

开发一个功能完善、用户体验良好的在线学习平台，实现课程浏览、购买、学习、问答、笔记、评价等核心功能，为用户提供全方位的在线学习体验，同时为教师提供课程发布和管理的便捷途径。

### 1.3 项目范围

- 用户管理：注册、登录、个人信息管理
- 课程管理：课程创建、章节管理、分类管理
- 学习功能：在线学习、笔记记录、问答交流
- 评价系统：课程评分、评价
- 支付功能：课程购买、在线支付
- 搜索功能：课程搜索
- 后台管理：用户管理、课程管理、分类管理等

## 2. 系统架构

### 2.1 技术架构

#### 2.1.1 后端技术栈

- **基础框架**：Spring Boot 
- **微服务框架**：Spring Cloud 
- **服务注册与发现**：Nacos 
- **网关服务**：Spring Cloud Gateway
- **认证授权**：Spring Security  Jwt
- **持久层框架**：MyBatis-plus
- **接口文档**：Swagger
- **分页插件**：PageHelper
- **开发工具**：Lombok
- **文件存储**：MinIO
- **支付集成**：支付宝SDK

#### 2.1.2 前端技术栈

- **前端框架**：Vue 3
- **UI组件库**：Element Plus
- **状态管理**：Vuex
- **路由管理**：Vue Router
- **HTTP客户端**：Axios

### 2.2 系统架构

采用微服务架构，主要包含以下模块：

1. **父工程 (learning)**：Maven聚合工程，管理所有微服务模块
2. **公共模块 (learning-common)**：共享的工具类、实体类、异常处理等
3. **认证服务 (learning-auth)**：用户认证和授权
4. **网关服务 (learning-gateway)**：API网关，路由转发
5. **业务服务 (learning-service)**：
   - **用户服务 (learning-user)**：用户管理
   - **课程服务 (learning-course)**：课程管理
   - **学习服务 (learning-learn)**：课程管理
   - **文件服务 (learning-file)**：文件上传下载
   - **交易服务 (learning-trade)**：订单和支付管理

## 3. 功能需求

### 3.1 用户管理

#### 3.1.1 用户注册

- **描述**：新用户可以通过注册功能创建账号
- **优先级**：高
- **详细需求**：
  - 用户需提供用户名、密码、邮箱等基本信息
  - 用户名不可重复
  - 密码需符合安全要求（至少8位，包含字母和数字）
  - 邮箱格式需合法
  - 注册成功后默认角色为"学生"

#### 3.1.2 用户登录

- **描述**：已注册用户可以通过用户名和密码登录系统
- **优先级**：高
- **详细需求**：
  - 支持用户名+密码登录
  - 登录成功后返回JWT令牌
  - 支持记住登录状态


#### 3.1.3 个人信息管理

- **描述**：用户可以查看和修改个人信息
- **优先级**：中
- **详细需求**：
  - 查看个人基本信息
  - 修改姓名、性别、手机号码等信息
  - 上传和更换头像
  - 修改密码

#### 3.1.4 角色管理

- **描述**：系统支持多种用户角色，不同角色拥有不同权限
- **优先级**：高
- **详细需求**：
  - 支持学生、教师、管理员三种角色
  - 学生：可以浏览、购买、学习课程，发表评价和问题
  - 教师：可以创建和管理课程，回答问题
  - 管理员：可以管理所有用户、课程和系统设置

### 3.2 课程管理

#### 3.2.1 课程创建

- **描述**：教师可以创建新课程
- **优先级**：高
- **详细需求**：
  - 设置课程名称、简介、价格等基本信息
  - 上传课程封面图片
  - 选择课程分类
  - 课程创建后需经管理员审核通过才能发布

#### 3.2.2 章节管理

- **描述**：教师可以为课程添加和管理章节
- **优先级**：高
- **详细需求**：
  - 添加章节标题和内容
  - 支持视频和文字两种内容类型
  - 上传视频或编辑文字内容
  - 设置视频时长信息
  - 编辑和删除已有章节

#### 3.2.3 分类管理

- **描述**：管理员可以管理课程分类
- **优先级**：中
- **详细需求**：
  - 创建、编辑和删除分类
  - 支持多级分类结构
  - 将课程关联到一个或多个分类

#### 3.2.4 课程审核

- **描述**：管理员审核教师创建的课程
- **优先级**：中
- **详细需求**：
  - 查看待审核课程列表
  - 审核课程内容是否合规
  - 通过或拒绝课程发布
  - 提供拒绝原因（如适用）

### 3.3 学习功能

#### 3.3.1 课程浏览

- **描述**：用户可以浏览平台上的课程
- **优先级**：高
- **详细需求**：
  - 查看课程列表，支持分页
  - 按分类筛选课程
  - 查看课程详情，包括简介、章节列表、评价等
  - 查看教师信息

#### 3.3.2 课程学习

- **描述**：已购买课程的用户可以学习课程内容
- **优先级**：高
- **详细需求**：
  - 观看视频或阅读文字内容
  - 记录学习进度
  - 支持视频播放控制（暂停、继续、调整速度等）
  - 支持上次学习位置记忆

#### 3.3.3 笔记功能

- **描述**：用户可以在学习过程中记录笔记
- **优先级**：中
- **详细需求**：
  - 创建、编辑和删除笔记
  - 查看笔记列表
  - 笔记与课程关联

#### 3.3.4 问答功能

- **描述**：用户可以提问和回答问题
- **优先级**：中
- **详细需求**：
  - 发布与课程相关的问题
  - 查看问题列表
  - 回答问题
  - 查看问题详情和所有回答

### 3.4 评价系统

#### 3.4.1 课程评分

- **描述**：用户可以对已学习的课程进行评分
- **优先级**：中
- **详细需求**：
  - 对课程进行1-5星评分
  - 计算并显示课程的平均评分
  - 用户只能对已购买的课程评分
  - 每个用户对同一课程只能评分一次

#### 3.4.2 课程评价

- **描述**：用户可以对已学习的课程发表评价
- **优先级**：中
- **详细需求**：
  - 发表文字评价
  - 查看评价列表，支持分页
  - 用户只能对已购买的课程评价
  - 教师可以查看自己课程的所有评价

### 3.5 支付功能

#### 3.5.1 课程购买

- **描述**：用户可以购买付费课程
- **优先级**：高
- **详细需求**：
  - 将课程添加到购物车
  - 生成订单
  - 设置订单超时自动关闭时间
  - 查看订单状态

#### 3.5.2 在线支付

- **描述**：用户可以通过在线支付方式购买课程
- **优先级**：高
- **详细需求**：
  - 集成支付宝支付接口
  - 支持支付结果实时通知
  - 支付成功后自动更新订单状态
  - 支付成功后用户可立即访问课程内容

### 3.6 搜索功能

#### 3.6.1 课程搜索

- **描述**：用户可以搜索平台上的课程
- **优先级**：中
- **详细需求**：
  - 按课程名称搜索
  - 按关键词搜索
  - 支持分类筛选
  - 支持排序（最新、最热、评分最高等）

### 3.7 后台管理

#### 3.7.1 用户管理

- **描述**：管理员可以管理系统用户
- **优先级**：高
- **详细需求**：
  - 查看用户列表，支持分页和搜索
  - 查看用户详细信息
  - 修改用户角色
  - 禁用/启用用户账号

#### 3.7.2 课程管理

- **描述**：管理员可以管理所有课程
- **优先级**：高
- **详细需求**：
  - 查看所有课程列表，支持分页和搜索
  - 审核新创建的课程
  - 下架违规课程
  - 查看课程详细信息和统计数据

## 4. 非功能需求

### 4.2 安全需求

- 用户密码加密存储
- 使用JWT进行身份验证

## 5. 数据模型

### 5.1 核心数据表

#### 5.1.1 用户表 (user)

| 字段名 | 类型 | 描述 |
|--------|------|------|
| id | bigint | 主键ID |
| username | varchar(20) | 用户名 |
| password | varchar(100) | 密码 |
| full_name | varchar(20) | 姓名 |
| gender | char(2) | 性别 |
| role_id | int | 角色ID |
| email_address | varchar(100) | 邮箱地址 |
| phone_number | varchar(100) | 手机号码 |
| profile_picture | varchar(100) | 头像链接 |
| create_time | datetime | 创建时间 |
| update_time | datetime | 修改时间 |

#### 5.1.2 角色表 (role)

| 字段名 | 类型 | 描述 |
|--------|------|------|
| id | int | 主键ID |
| name | varchar(20) | 角色名 |
| create_time | datetime | 创建时间 |
| update_time | datetime | 更新时间 |

#### 5.1.3 课程表 (course)

| 字段名 | 类型 | 描述 |
|--------|------|------|
| id | bigint | 课程ID |
| name | varchar(100) | 名称 |
| price | decimal(10,2) | 价格 |
| description | varchar(200) | 简介 |
| user_name | varchar(20) | 用户名 |
| average_score | tinyint | 平均评分 |
| cover_picture | varchar(100) | 封面图片地址 |
| approved | tinyint | 审核通过 |
| create_time | datetime | 创建时间 |
| update_time | datetime | 修改时间 |

#### 5.1.4 章节表 (chapter)

| 字段名 | 类型 | 描述 |
|--------|------|------|
| id | bigint | 章节ID |
| title | varchar(100) | 标题 |
| type | varchar(10) | 内容类型 |
| video_url | varchar(255) | 视频链接 |
| video_time | varchar(20) | 视频时长 |
| text_content | text | 文字内容 |
| course_id | bigint | 课程ID |
| create_time | datetime | 创建时间 |
| update_time | datetime | 修改时间 |

#### 5.1.5 分类表 (category)

| 字段名 | 类型 | 描述 |
|--------|------|------|
| id | int | 分类ID |
| name | varchar(20) | 名称 |
| parent_id | int | 父级ID |
| create_time | datetime | 创建时间 |
| update_time | datetime | 修改时间 |

#### 5.1.6 订单表 (order)

| 字段名 | 类型 | 描述 |
|--------|------|------|
| id | bigint | 主键ID |
| trade_no | varchar(40) | 交易编号 |
| price | decimal(10,2) | 价格 |
| user_name | varchar(255) | 买家 |
| product_id | bigint | 商品ID |
| product_name | varchar(255) | 商品名称 |
| close_milliseconds | bigint | 关闭时间 |
| create_time | datetime | 创建时间 |
| update_time | datetime | 更新时间 |
| status | tinyint | 状态：0->未支付 1->已支付 2->已关闭 |

###  参考文档

- Spring Cloud文档: https://spring.io/projects/spring-cloud
- Spring Boot文档: https://spring.io/projects/spring-boot
- Vue 3文档: https://v3.vuejs.org/
- Nacos文档: https://nacos.io/zh-cn/docs/what-is-nacos.html 